"use strict";function cov_14ybkxocrq(){var path="C:\\Users\\ernie.hayter\\Dropbox\\Documentation\\Work\\TS\\Technical\\POC\\Teams\\Microsoft-Teams-Connector\\dist\\test.js";var hash="60a365eed053402b288d576e8aabfd3f87093327";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\ernie.hayter\\Dropbox\\Documentation\\Work\\TS\\Technical\\POC\\Teams\\Microsoft-Teams-Connector\\dist\\test.js",statementMap:{"0":{start:{line:1,column:19},end:{line:1,column:33}},"1":{start:{line:1,column:48},end:{line:1,column:105}},"2":{start:{line:1,column:106},end:{line:1,column:173}},"3":{start:{line:1,column:179},end:{line:1,column:183}},"4":{start:{line:1,column:200},end:{line:1,column:211}},"5":{start:{line:1,column:226},end:{line:1,column:556}},"6":{start:{line:1,column:265},end:{line:1,column:306}},"7":{start:{line:1,column:317},end:{line:1,column:354}},"8":{start:{line:1,column:377},end:{line:1,column:403}},"9":{start:{line:1,column:411},end:{line:1,column:553}},"10":{start:{line:1,column:431},end:{line:1,column:551}},"11":{start:{line:1,column:557},end:{line:1,column:3247}},"12":{start:{line:1,column:608},end:{line:1,column:667}},"13":{start:{line:1,column:629},end:{line:1,column:664}},"14":{start:{line:1,column:735},end:{line:1,column:739}},"15":{start:{line:1,column:742},end:{line:1,column:753}},"16":{start:{line:1,column:756},end:{line:1,column:771}},"17":{start:{line:1,column:772},end:{line:1,column:777}},"18":{start:{line:1,column:783},end:{line:1,column:787}},"19":{start:{line:1,column:788},end:{line:1,column:940}},"20":{start:{line:1,column:816},end:{line:1,column:819}},"21":{start:{line:1,column:1010},end:{line:1,column:1014}},"22":{start:{line:1,column:1017},end:{line:1,column:1030}},"23":{start:{line:1,column:1033},end:{line:1,column:1048}},"24":{start:{line:1,column:1049},end:{line:1,column:1054}},"25":{start:{line:1,column:1060},end:{line:1,column:1064}},"26":{start:{line:1,column:1065},end:{line:1,column:1217}},"27":{start:{line:1,column:1093},end:{line:1,column:1096}},"28":{start:{line:1,column:1283},end:{line:1,column:1287}},"29":{start:{line:1,column:1290},end:{line:1,column:1299}},"30":{start:{line:1,column:1302},end:{line:1,column:1419}},"31":{start:{line:1,column:1420},end:{line:1,column:1425}},"32":{start:{line:1,column:1431},end:{line:1,column:1435}},"33":{start:{line:1,column:1436},end:{line:1,column:1587}},"34":{start:{line:1,column:1464},end:{line:1,column:1467}},"35":{start:{line:1,column:1654},end:{line:1,column:1658}},"36":{start:{line:1,column:1661},end:{line:1,column:1671}},"37":{start:{line:1,column:1674},end:{line:1,column:2154}},"38":{start:{line:1,column:2155},end:{line:1,column:2160}},"39":{start:{line:1,column:2166},end:{line:1,column:2170}},"40":{start:{line:1,column:2171},end:{line:1,column:2279}},"41":{start:{line:1,column:2199},end:{line:1,column:2202}},"42":{start:{line:1,column:2349},end:{line:1,column:2356}},"43":{start:{line:1,column:2359},end:{line:1,column:2372}},"44":{start:{line:1,column:2375},end:{line:1,column:2483}},"45":{start:{line:1,column:2484},end:{line:1,column:2489}},"46":{start:{line:1,column:2495},end:{line:1,column:2499}},"47":{start:{line:1,column:2500},end:{line:1,column:2611}},"48":{start:{line:1,column:2528},end:{line:1,column:2531}},"49":{start:{line:1,column:2681},end:{line:1,column:2688}},"50":{start:{line:1,column:2691},end:{line:1,column:2704}},"51":{start:{line:1,column:2707},end:{line:1,column:2744}},"52":{start:{line:1,column:2745},end:{line:1,column:2750}},"53":{start:{line:1,column:2756},end:{line:1,column:2760}},"54":{start:{line:1,column:2761},end:{line:1,column:2872}},"55":{start:{line:1,column:2789},end:{line:1,column:2792}},"56":{start:{line:1,column:2955},end:{line:1,column:2962}},"57":{start:{line:1,column:2965},end:{line:1,column:2983}},"58":{start:{line:1,column:2986},end:{line:1,column:3116}},"59":{start:{line:1,column:3117},end:{line:1,column:3122}},"60":{start:{line:1,column:3128},end:{line:1,column:3132}},"61":{start:{line:1,column:3133},end:{line:1,column:3244}},"62":{start:{line:1,column:3161},end:{line:1,column:3164}}},fnMap:{"0":{name:"a",decl:{start:{line:1,column:43},end:{line:1,column:44}},loc:{start:{line:1,column:47},end:{line:1,column:106}},line:1},"1":{name:"t",decl:{start:{line:1,column:193},end:{line:1,column:194}},loc:{start:{line:1,column:199},end:{line:1,column:212}},line:1},"2":{name:"l",decl:{start:{line:1,column:221},end:{line:1,column:222}},loc:{start:{line:1,column:225},end:{line:1,column:557}},line:1},"3":{name:"(anonymous_3)",decl:{start:{line:1,column:251},end:{line:1,column:252}},loc:{start:{line:1,column:264},end:{line:1,column:307}},line:1},"4":{name:"(anonymous_4)",decl:{start:{line:1,column:307},end:{line:1,column:308}},loc:{start:{line:1,column:316},end:{line:1,column:355}},line:1},"5":{name:"(anonymous_5)",decl:{start:{line:1,column:355},end:{line:1,column:356}},loc:{start:{line:1,column:376},end:{line:1,column:404}},line:1},"6":{name:"(anonymous_6)",decl:{start:{line:1,column:404},end:{line:1,column:405}},loc:{start:{line:1,column:410},end:{line:1,column:554}},line:1},"7":{name:"(anonymous_7)",decl:{start:{line:1,column:426},end:{line:1,column:427}},loc:{start:{line:1,column:430},end:{line:1,column:552}},line:1},"8":{name:"(anonymous_8)",decl:{start:{line:1,column:604},end:{line:1,column:605}},loc:{start:{line:1,column:607},end:{line:1,column:668}},line:1},"9":{name:"(anonymous_9)",decl:{start:{line:1,column:618},end:{line:1,column:619}},loc:{start:{line:1,column:628},end:{line:1,column:665}},line:1},"10":{name:"(anonymous_10)",decl:{start:{line:1,column:719},end:{line:1,column:720}},loc:{start:{line:1,column:728},end:{line:1,column:941}},line:1},"11":{name:"(anonymous_11)",decl:{start:{line:1,column:804},end:{line:1,column:805}},loc:{start:{line:1,column:815},end:{line:1,column:820}},line:1},"12":{name:"(anonymous_12)",decl:{start:{line:1,column:994},end:{line:1,column:995}},loc:{start:{line:1,column:1003},end:{line:1,column:1218}},line:1},"13":{name:"(anonymous_13)",decl:{start:{line:1,column:1081},end:{line:1,column:1082}},loc:{start:{line:1,column:1092},end:{line:1,column:1097}},line:1},"14":{name:"(anonymous_14)",decl:{start:{line:1,column:1267},end:{line:1,column:1268}},loc:{start:{line:1,column:1276},end:{line:1,column:1588}},line:1},"15":{name:"(anonymous_15)",decl:{start:{line:1,column:1452},end:{line:1,column:1453}},loc:{start:{line:1,column:1463},end:{line:1,column:1468}},line:1},"16":{name:"(anonymous_16)",decl:{start:{line:1,column:1638},end:{line:1,column:1639}},loc:{start:{line:1,column:1647},end:{line:1,column:2280}},line:1},"17":{name:"(anonymous_17)",decl:{start:{line:1,column:2187},end:{line:1,column:2188}},loc:{start:{line:1,column:2198},end:{line:1,column:2203}},line:1},"18":{name:"(anonymous_18)",decl:{start:{line:1,column:2333},end:{line:1,column:2334}},loc:{start:{line:1,column:2342},end:{line:1,column:2612}},line:1},"19":{name:"(anonymous_19)",decl:{start:{line:1,column:2516},end:{line:1,column:2517}},loc:{start:{line:1,column:2527},end:{line:1,column:2532}},line:1},"20":{name:"(anonymous_20)",decl:{start:{line:1,column:2665},end:{line:1,column:2666}},loc:{start:{line:1,column:2674},end:{line:1,column:2873}},line:1},"21":{name:"(anonymous_21)",decl:{start:{line:1,column:2777},end:{line:1,column:2778}},loc:{start:{line:1,column:2788},end:{line:1,column:2793}},line:1},"22":{name:"(anonymous_22)",decl:{start:{line:1,column:2939},end:{line:1,column:2940}},loc:{start:{line:1,column:2948},end:{line:1,column:3245}},line:1},"23":{name:"(anonymous_23)",decl:{start:{line:1,column:3149},end:{line:1,column:3150}},loc:{start:{line:1,column:3160},end:{line:1,column:3165}},line:1}},branchMap:{"0":{loc:{start:{line:1,column:55},end:{line:1,column:105}},type:"cond-expr",locations:[{start:{line:1,column:92},end:{line:1,column:93}},{start:{line:1,column:94},end:{line:1,column:105}}],line:1},"1":{loc:{start:{line:1,column:55},end:{line:1,column:91}},type:"binary-expr",locations:[{start:{line:1,column:55},end:{line:1,column:56}},{start:{line:1,column:58},end:{line:1,column:76}},{start:{line:1,column:78},end:{line:1,column:91}}],line:1}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},b:{"0":[0,0],"1":[0,0,0]},inputSourceMap:{version:3,file:"test.js",sources:["../src/test.ts"],sourcesContent:["import test from 'ava';\r\nimport '@k2oss/k2-broker-core/test-framework';\r\nimport './index';\r\n\r\n\r\n//\r\n// WARNING: any tests that use this mock() must be run serially\r\n// (using test.serial()), because they modify global  !\r\nfunction mock(name: string, value: any) \r\n{\r\n    global[name] = value;\r\n}\r\n\r\n// helper method to pass the data which is dynamic to each test into the mocked XHR class object.\r\n// uses mock() so must only be used in test.serial()'y run tests\r\nfunction mockXHR(data){\r\n    let xhr: {[key:string]: any} = null;\r\n    class XHR {\r\n        public onreadystatechange: () => void;\r\n        public readyState: number;\r\n        public status: number;\r\n        public responseText: string;\r\n        private recorder: {[key:string]: any};\r\n\r\n        constructor() {\r\n            xhr = this.recorder = {};\r\n            this.recorder.headers = {};\r\n        }\r\n\r\n        open(method: string, url: string) {\r\n            this.recorder.opened = {method, url};\r\n        }\r\n\r\n        setRequestHeader(key: string, value: string) {\r\n            this.recorder.headers[key] = value;\r\n        }\r\n\r\n        send() {\r\n            queueMicrotask(() =>\r\n            {\r\n                this.readyState = 4;\r\n                this.status = 200;\r\n                // this.responseText = JSON.stringify({\r\n                //     \"id\": 4321,\r\n                //     \"requestStatusUrl\": undefined,\r\n                //     \"isSuccessful\": true\r\n                // });\r\n                this.responseText = JSON.stringify(data);\r\n                this.onreadystatechange();\r\n                delete this.responseText;\r\n            });\r\n        }\r\n    }\r\n\r\n    mock('XMLHttpRequest', XHR);\r\n}\r\n\r\ntest('onexecute fails for invalid object', t => {\r\n    t.throws(function () {\r\n        let obj = 'invalidObject';\r\n        onexecute(obj, '', {}, {});\r\n    });\r\n});\r\n\r\n//\r\n// // example of how to catch a throw exception\r\n// const promise = () => Promise.reject(new Error('TEST'));\r\n// test('rejects', async t => {\r\n//     const error = await t.throwsAsync(promise);\r\n//     t.is(error.message, 'TEST');\r\n// });\r\n\r\ntest.serial('onexecuteTeamArchive succeeds', async t => {\r\n    //\r\n    // note: inputs/outputs found index.ts ondescribe \"postSchema()\" method\r\n\r\n    let validObject = Team;\r\n    let method = TeamArchive;\r\n\r\n    let data = {\r\n        [TeamId]: 1234\r\n    };\r\n    mockXHR(data);\r\n\r\n    let result: any = null;\r\n    function pr(r: any) {\r\n        result = r;\r\n    }\r\n\r\n    mock('postResult', pr);\r\n\r\n    await onexecute(validObject, method, {}, data);\r\n\r\n    // t.deepEqual(xhr, {\r\n    //     opened: {\r\n    //         method: 'GET',\r\n    //         url: 'https://jsonplaceholder.typicode.com/todos/123'\r\n    //     },\r\n    //     headers: {\r\n    //         'test': 'test value'\r\n    //     }\r\n    // });\r\n\r\n    t.deepEqual(result, {\r\n        [TeamId]: 1234,\r\n        [TeamRequestStatusUrl]: undefined,\r\n        [TeamIsSuccessful]: true\r\n    });\r\n\r\n    t.pass();\r\n});\r\n\r\ntest.serial('onexecuteTeamUnarchive succeeds', async t => {\r\n    //\r\n    // note: inputs/outputs found index.ts ondescribe \"postSchema()\" method\r\n\r\n    let teamId = 4321;\r\n    let validObject = Team;\r\n    let method = TeamUnarchive;\r\n\r\n    let data = {\r\n        [TeamId]: teamId\r\n    };\r\n    mockXHR(data);\r\n\r\n    let result: any = null;\r\n    function pr(r: any) { result = r;  }\r\n    mock('postResult', pr);\r\n\r\n    await onexecute(validObject, method, {}, data);\r\n\r\n    t.deepEqual(result, {\r\n        [TeamId]: teamId,\r\n        [TeamRequestStatusUrl]: undefined,\r\n        [TeamIsSuccessful]: true\r\n    });\r\n\r\n    t.pass();\r\n});\r\n\r\ntest.serial('onexecuteTeamClone succeeds', async t => {\r\n    //\r\n    // note: inputs/outputs found index.ts ondescribe \"postSchema()\" method\r\n\r\n    let validObject = Team;\r\n    let method = TeamClone;\r\n\r\n    let teamId = 999;\r\n    let data = {\r\n        [TeamId]: teamId,\r\n        [TeamDisplayName]: \"SomeName\",\r\n        [TeamDescription]: \"SomeDescription\",\r\n        [TeamMailNickname]: \"SomeMailNickname\"\r\n    };\r\n    mockXHR(data);\r\n\r\n    let result: any = null;\r\n    function pr(r: any) { result = r;  }\r\n    mock('postResult', pr);\r\n\r\n    await onexecute(validObject, method, {}, data);\r\n\r\n    t.deepEqual(result,{\r\n        [TeamId]: teamId,\r\n        [TeamRequestStatusUrl]: undefined,\r\n        [TeamIsSuccessful]: true\r\n    });\r\n\r\n    t.pass();\r\n});\r\n\r\ntest.serial('onexecuteTeamUpdate succeeds', async t => {\r\n    //\r\n    // note: inputs/outputs found index.ts ondescribe \"postSchema()\" method\r\n\r\n    let validObject = Team;\r\n    let method = TeamUpdate;\r\n\r\n    let teamId = 555;\r\n    let data = {\r\n        [TeamId]: teamId,\r\n        [TeamMsAllowCreateUpdateChannels]: true,\r\n        [TeamMsAllowDeleteChannels]: true,\r\n        [TeamMsAllowAddRemoveApps]: true,\r\n        [TeamMsAllowCreateUpdateRemoveTabs]: true,\r\n        [TeamMsAllowCreateUpdateRemoveConnectors]: true,\r\n        [TeamGsAllowCreateUpdateChannels]: true,\r\n        [TeamGsAllowDeleteChannels]: true,\r\n        [TeamMsgAllowUserEditMessages]: true,\r\n        [TeamMsgAllowUserDeleteMessages]: true,\r\n        [TeamMsgAllowTeamMentions]: true,\r\n        [TeamMsgAllowChannelMentions]: true,\r\n        [TeamFsAllowGiphy]: true,\r\n        [TeamFsAllowStickersAndMemes]: true,\r\n        [TeamFsAllowCustomMemes]: true\r\n    };\r\n    mockXHR(data);\r\n\r\n    let result: any = null;\r\n    function pr(r: any) { result = r;  }\r\n    mock('postResult', pr);\r\n\r\n    await onexecute(validObject, method, {}, data);\r\n\r\n    t.deepEqual(result,{\r\n        [TeamIsSuccessful]: true\r\n    });\r\n\r\n    t.pass();\r\n});\r\n\r\ntest.serial('onexecuteChannelUpdate succeeds', async t => {\r\n    //\r\n    // note: inputs/outputs found index.ts ondescribe \"postSchema()\" method\r\n\r\n    let validObject = Channel;\r\n    let method = ChannelUpdate;\r\n\r\n    let channelId = 777;\r\n    let teamId = 888;\r\n    let data = {\r\n        [ChannelId]: channelId,\r\n        [ChannelTeamId]: teamId,\r\n        [ChannelDisplayName]: \"SomeName\",\r\n        [ChannelDescription]: \"SomeDescription\"\r\n    };\r\n    mockXHR(data);\r\n\r\n    let result: any = null;\r\n    function pr(r: any) { result = r;  }\r\n    mock('postResult', pr);\r\n\r\n    await onexecute(validObject, method, {}, data);\r\n\r\n    t.deepEqual(result,{\r\n        [ChannelIsSuccessful]: true\r\n    });\r\n\r\n    t.pass();\r\n});\r\n\r\ntest.serial('onexecuteChannelDelete succeeds', async t => {\r\n    //\r\n    // note: inputs/outputs found index.ts ondescribe \"postSchema()\" method\r\n\r\n    let validObject = Channel;\r\n    let method = ChannelDelete;\r\n\r\n    let channelId = 345;\r\n    let teamId = 100;\r\n    let data = {\r\n        [ChannelId]: channelId,\r\n        [ChannelTeamId]: teamId\r\n    };\r\n    mockXHR(data);\r\n\r\n    let result: any = null;\r\n    function pr(r: any) { result = r;  }\r\n    mock('postResult', pr);\r\n\r\n    await onexecute(validObject, method, {}, data);\r\n\r\n    t.deepEqual(result,{\r\n        [ChannelIsSuccessful]: true\r\n    });\r\n\r\n    t.pass();\r\n});\r\n\r\ntest.serial('onexecuteSendMessage (of a Channel) succeeds', async t => {\r\n    //\r\n    // note: inputs/outputs found index.ts ondescribe \"postSchema()\" method\r\n\r\n    let validObject = Channel;\r\n    let method = ChannelSendMessage;\r\n\r\n    let channelId = 345;\r\n    let teamId = 100;\r\n    let data = {\r\n        [ChannelId]: channelId,\r\n        [ChannelTeamId]: teamId,\r\n        [ChannelMessageSubject]: \"subject\",\r\n        [ChannelMessageBody]: \"body\",\r\n        [ChannelMessageIsImportant]: true\r\n    };\r\n    mockXHR(data);\r\n\r\n    let result: any = null;\r\n    function pr(r: any) { result = r;  }\r\n    mock('postResult', pr);\r\n\r\n    await onexecute(validObject, method, {}, data);\r\n\r\n    t.deepEqual(result,{\r\n        [ChannelIsSuccessful]: true\r\n    });\r\n\r\n    t.pass();\r\n});"],names:["mock","name","value","global","mockXHR","data","constructor","this","recorder","headers","open","method","url","opened","setRequestHeader","key","send","queueMicrotask","readyState","status","responseText","JSON","stringify","onreadystatechange","test","t","throws","onexecute","serial","async","validObject","Team","TeamArchive","TeamId","result","r","deepEqual","TeamRequestStatusUrl","undefined","TeamIsSuccessful","pass","TeamUnarchive","TeamClone","TeamDisplayName","TeamDescription","TeamMailNickname","TeamUpdate","TeamMsAllowCreateUpdateChannels","TeamMsAllowDeleteChannels","TeamMsAllowAddRemoveApps","TeamMsAllowCreateUpdateRemoveTabs","TeamMsAllowCreateUpdateRemoveConnectors","TeamGsAllowCreateUpdateChannels","TeamGsAllowDeleteChannels","TeamMsgAllowUserEditMessages","TeamMsgAllowUserDeleteMessages","TeamMsgAllowTeamMentions","TeamMsgAllowChannelMentions","TeamFsAllowGiphy","TeamFsAllowStickersAndMemes","TeamFsAllowCustomMemes","Channel","ChannelUpdate","ChannelId","ChannelTeamId","ChannelDisplayName","ChannelDescription","ChannelIsSuccessful","ChannelDelete","ChannelSendMessage","ChannelMessageSubject","ChannelMessageBody","ChannelMessageIsImportant"],mappings:"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"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"60a365eed053402b288d576e8aabfd3f87093327"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_14ybkxocrq=function(){return actualCoverage;};}return actualCoverage;}cov_14ybkxocrq();var e=(cov_14ybkxocrq().s[0]++,require("ava"));function a(e){cov_14ybkxocrq().f[0]++;cov_14ybkxocrq().s[1]++;return(cov_14ybkxocrq().b[1][0]++,e)&&(cov_14ybkxocrq().b[1][1]++,"object"==typeof e)&&(cov_14ybkxocrq().b[1][2]++,"default"in e)?(cov_14ybkxocrq().b[0][0]++,e):(cov_14ybkxocrq().b[0][1]++,{default:e});}cov_14ybkxocrq().s[2]++;require("@k2oss/k2-broker-core/test-framework"),require("./index");var s=(cov_14ybkxocrq().s[3]++,a(e));function t(e,a){cov_14ybkxocrq().f[1]++;cov_14ybkxocrq().s[4]++;global[e]=a;}function l(e){cov_14ybkxocrq().f[2]++;cov_14ybkxocrq().s[5]++;t("XMLHttpRequest",class{constructor(){cov_14ybkxocrq().f[3]++;cov_14ybkxocrq().s[6]++;this.recorder={},this.recorder.headers={};}open(e,a){cov_14ybkxocrq().f[4]++;cov_14ybkxocrq().s[7]++;this.recorder.opened={method:e,url:a};}setRequestHeader(e,a){cov_14ybkxocrq().f[5]++;cov_14ybkxocrq().s[8]++;this.recorder.headers[e]=a;}send(){cov_14ybkxocrq().f[6]++;cov_14ybkxocrq().s[9]++;queueMicrotask(()=>{cov_14ybkxocrq().f[7]++;cov_14ybkxocrq().s[10]++;this.readyState=4,this.status=200,this.responseText=JSON.stringify(e),this.onreadystatechange(),delete this.responseText;});}});}cov_14ybkxocrq().s[11]++;s.default("onexecute fails for invalid object",e=>{cov_14ybkxocrq().f[8]++;cov_14ybkxocrq().s[12]++;e.throws(function(){cov_14ybkxocrq().f[9]++;cov_14ybkxocrq().s[13]++;onexecute("invalidObject","",{},{});});}),s.default.serial("onexecuteTeamArchive succeeds",async e=>{cov_14ybkxocrq().f[10]++;let a=(cov_14ybkxocrq().s[14]++,Team),s=(cov_14ybkxocrq().s[15]++,TeamArchive),n=(cov_14ybkxocrq().s[16]++,{[TeamId]:1234});cov_14ybkxocrq().s[17]++;l(n);let u=(cov_14ybkxocrq().s[18]++,null);cov_14ybkxocrq().s[19]++;t("postResult",function(e){cov_14ybkxocrq().f[11]++;cov_14ybkxocrq().s[20]++;u=e;}),await onexecute(a,s,{},n),e.deepEqual(u,{[TeamId]:1234,[TeamRequestStatusUrl]:void 0,[TeamIsSuccessful]:!0}),e.pass();}),s.default.serial("onexecuteTeamUnarchive succeeds",async e=>{cov_14ybkxocrq().f[12]++;let a=(cov_14ybkxocrq().s[21]++,Team),s=(cov_14ybkxocrq().s[22]++,TeamUnarchive),n=(cov_14ybkxocrq().s[23]++,{[TeamId]:4321});cov_14ybkxocrq().s[24]++;l(n);let u=(cov_14ybkxocrq().s[25]++,null);cov_14ybkxocrq().s[26]++;t("postResult",function(e){cov_14ybkxocrq().f[13]++;cov_14ybkxocrq().s[27]++;u=e;}),await onexecute(a,s,{},n),e.deepEqual(u,{[TeamId]:4321,[TeamRequestStatusUrl]:void 0,[TeamIsSuccessful]:!0}),e.pass();}),s.default.serial("onexecuteTeamClone succeeds",async e=>{cov_14ybkxocrq().f[14]++;let a=(cov_14ybkxocrq().s[28]++,Team),s=(cov_14ybkxocrq().s[29]++,TeamClone),n=(cov_14ybkxocrq().s[30]++,{[TeamId]:999,[TeamDisplayName]:"SomeName",[TeamDescription]:"SomeDescription",[TeamMailNickname]:"SomeMailNickname"});cov_14ybkxocrq().s[31]++;l(n);let u=(cov_14ybkxocrq().s[32]++,null);cov_14ybkxocrq().s[33]++;t("postResult",function(e){cov_14ybkxocrq().f[15]++;cov_14ybkxocrq().s[34]++;u=e;}),await onexecute(a,s,{},n),e.deepEqual(u,{[TeamId]:999,[TeamRequestStatusUrl]:void 0,[TeamIsSuccessful]:!0}),e.pass();}),s.default.serial("onexecuteTeamUpdate succeeds",async e=>{cov_14ybkxocrq().f[16]++;let a=(cov_14ybkxocrq().s[35]++,Team),s=(cov_14ybkxocrq().s[36]++,TeamUpdate),n=(cov_14ybkxocrq().s[37]++,{[TeamId]:555,[TeamMsAllowCreateUpdateChannels]:!0,[TeamMsAllowDeleteChannels]:!0,[TeamMsAllowAddRemoveApps]:!0,[TeamMsAllowCreateUpdateRemoveTabs]:!0,[TeamMsAllowCreateUpdateRemoveConnectors]:!0,[TeamGsAllowCreateUpdateChannels]:!0,[TeamGsAllowDeleteChannels]:!0,[TeamMsgAllowUserEditMessages]:!0,[TeamMsgAllowUserDeleteMessages]:!0,[TeamMsgAllowTeamMentions]:!0,[TeamMsgAllowChannelMentions]:!0,[TeamFsAllowGiphy]:!0,[TeamFsAllowStickersAndMemes]:!0,[TeamFsAllowCustomMemes]:!0});cov_14ybkxocrq().s[38]++;l(n);let u=(cov_14ybkxocrq().s[39]++,null);cov_14ybkxocrq().s[40]++;t("postResult",function(e){cov_14ybkxocrq().f[17]++;cov_14ybkxocrq().s[41]++;u=e;}),await onexecute(a,s,{},n),e.deepEqual(u,{[TeamIsSuccessful]:!0}),e.pass();}),s.default.serial("onexecuteChannelUpdate succeeds",async e=>{cov_14ybkxocrq().f[18]++;let a=(cov_14ybkxocrq().s[42]++,Channel),s=(cov_14ybkxocrq().s[43]++,ChannelUpdate),n=(cov_14ybkxocrq().s[44]++,{[ChannelId]:777,[ChannelTeamId]:888,[ChannelDisplayName]:"SomeName",[ChannelDescription]:"SomeDescription"});cov_14ybkxocrq().s[45]++;l(n);let u=(cov_14ybkxocrq().s[46]++,null);cov_14ybkxocrq().s[47]++;t("postResult",function(e){cov_14ybkxocrq().f[19]++;cov_14ybkxocrq().s[48]++;u=e;}),await onexecute(a,s,{},n),e.deepEqual(u,{[ChannelIsSuccessful]:!0}),e.pass();}),s.default.serial("onexecuteChannelDelete succeeds",async e=>{cov_14ybkxocrq().f[20]++;let a=(cov_14ybkxocrq().s[49]++,Channel),s=(cov_14ybkxocrq().s[50]++,ChannelDelete),n=(cov_14ybkxocrq().s[51]++,{[ChannelId]:345,[ChannelTeamId]:100});cov_14ybkxocrq().s[52]++;l(n);let u=(cov_14ybkxocrq().s[53]++,null);cov_14ybkxocrq().s[54]++;t("postResult",function(e){cov_14ybkxocrq().f[21]++;cov_14ybkxocrq().s[55]++;u=e;}),await onexecute(a,s,{},n),e.deepEqual(u,{[ChannelIsSuccessful]:!0}),e.pass();}),s.default.serial("onexecuteSendMessage (of a Channel) succeeds",async e=>{cov_14ybkxocrq().f[22]++;let a=(cov_14ybkxocrq().s[56]++,Channel),s=(cov_14ybkxocrq().s[57]++,ChannelSendMessage),n=(cov_14ybkxocrq().s[58]++,{[ChannelId]:345,[ChannelTeamId]:100,[ChannelMessageSubject]:"subject",[ChannelMessageBody]:"body",[ChannelMessageIsImportant]:!0});cov_14ybkxocrq().s[59]++;l(n);let u=(cov_14ybkxocrq().s[60]++,null);cov_14ybkxocrq().s[61]++;t("postResult",function(e){cov_14ybkxocrq().f[23]++;cov_14ybkxocrq().s[62]++;u=e;}),await onexecute(a,s,{},n),e.deepEqual(u,{[ChannelIsSuccessful]:!0}),e.pass();});//# sourceMappingURL=test.js.map
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy90ZXN0LnRzIl0sIm5hbWVzIjpbIm1vY2siLCJuYW1lIiwidmFsdWUiLCJnbG9iYWwiLCJtb2NrWEhSIiwiZGF0YSIsImNvbnN0cnVjdG9yIiwidGhpcyIsInJlY29yZGVyIiwiaGVhZGVycyIsIm9wZW4iLCJtZXRob2QiLCJ1cmwiLCJvcGVuZWQiLCJzZXRSZXF1ZXN0SGVhZGVyIiwia2V5Iiwic2VuZCIsInF1ZXVlTWljcm90YXNrIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInJlc3BvbnNlVGV4dCIsIkpTT04iLCJzdHJpbmdpZnkiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJ0ZXN0IiwidCIsInRocm93cyIsIm9uZXhlY3V0ZSIsInNlcmlhbCIsImFzeW5jIiwidmFsaWRPYmplY3QiLCJUZWFtIiwiVGVhbUFyY2hpdmUiLCJUZWFtSWQiLCJyZXN1bHQiLCJyIiwiZGVlcEVxdWFsIiwiVGVhbVJlcXVlc3RTdGF0dXNVcmwiLCJ1bmRlZmluZWQiLCJUZWFtSXNTdWNjZXNzZnVsIiwicGFzcyIsIlRlYW1VbmFyY2hpdmUiLCJUZWFtQ2xvbmUiLCJUZWFtRGlzcGxheU5hbWUiLCJUZWFtRGVzY3JpcHRpb24iLCJUZWFtTWFpbE5pY2tuYW1lIiwiVGVhbVVwZGF0ZSIsIlRlYW1Nc0FsbG93Q3JlYXRlVXBkYXRlQ2hhbm5lbHMiLCJUZWFtTXNBbGxvd0RlbGV0ZUNoYW5uZWxzIiwiVGVhbU1zQWxsb3dBZGRSZW1vdmVBcHBzIiwiVGVhbU1zQWxsb3dDcmVhdGVVcGRhdGVSZW1vdmVUYWJzIiwiVGVhbU1zQWxsb3dDcmVhdGVVcGRhdGVSZW1vdmVDb25uZWN0b3JzIiwiVGVhbUdzQWxsb3dDcmVhdGVVcGRhdGVDaGFubmVscyIsIlRlYW1Hc0FsbG93RGVsZXRlQ2hhbm5lbHMiLCJUZWFtTXNnQWxsb3dVc2VyRWRpdE1lc3NhZ2VzIiwiVGVhbU1zZ0FsbG93VXNlckRlbGV0ZU1lc3NhZ2VzIiwiVGVhbU1zZ0FsbG93VGVhbU1lbnRpb25zIiwiVGVhbU1zZ0FsbG93Q2hhbm5lbE1lbnRpb25zIiwiVGVhbUZzQWxsb3dHaXBoeSIsIlRlYW1Gc0FsbG93U3RpY2tlcnNBbmRNZW1lcyIsIlRlYW1Gc0FsbG93Q3VzdG9tTWVtZXMiLCJDaGFubmVsIiwiQ2hhbm5lbFVwZGF0ZSIsIkNoYW5uZWxJZCIsIkNoYW5uZWxUZWFtSWQiLCJDaGFubmVsRGlzcGxheU5hbWUiLCJDaGFubmVsRGVzY3JpcHRpb24iLCJDaGFubmVsSXNTdWNjZXNzZnVsIiwiQ2hhbm5lbERlbGV0ZSIsIkNoYW5uZWxTZW5kTWVzc2FnZSIsIkNoYW5uZWxNZXNzYWdlU3ViamVjdCIsIkNoYW5uZWxNZXNzYWdlQm9keSIsIkNoYW5uZWxNZXNzYWdlSXNJbXBvcnRhbnQiXSwibWFwcGluZ3MiOiI7bWhCQVFBLFFBQVNBLENBQUFBLENBQVQsQ0FBY0MsQ0FBZCxDQUE0QkMsQ0FBNUIsQ0FBNEJBLGlEQUV4QkMsTUFBQUEsQ0FBT0YsQ0FBUEUsQ0FBQUEsQ0FBZUQsQ0FBZkMsQ0FLSixTQUFTQyxDQUFBQSxDQUFULENBQWlCQyxDQUFqQixDQUFpQkEsaURBdUNiTCxDQUFBQSxDQUFLLGdCQUFMQSxDQUFLLEtBQUEsQ0E5QkRNLFdBQUFBLEVBQUFBLGlEQUNVQyxLQUFLQyxRQUFMRCxDQUFnQixFQUFoQkEsQ0FBZ0IsS0FDakJDLFFBRGlCLENBQ1JDLE9BRFEsQ0FDRSxFQURsQkYsQ0FJVkcsQ0FBQUEsSUFBQUEsQ0FBS0MsQ0FBTEQsQ0FBcUJFLENBQXJCRixDQUFxQkUsaURBQUFBLEtBQ1pKLFFBRFlJLENBQ0hDLE1BREdELENBQ00sQ0FBQ0QsTUFBQUEsQ0FBQUEsQ0FBRCxDQUFTQyxHQUFBQSxDQUFBQSxDQUFULENBRE5BLENBSXJCRSxDQUFBQSxnQkFBQUEsQ0FBaUJDLENBQWpCRCxDQUE4QlosQ0FBOUJZLENBQThCWixpREFBQUEsS0FDckJNLFFBRHFCTixDQUNaTyxPQURZUCxDQUNKYSxDQURJYixFQUNHQSxDQURIQSxDQUk5QmMsQ0FBQUEsSUFBQUEsRUFBQUEsaURBQ0lDLGNBQUFBLENBQWUsSUFBQSxrREFBQSxLQUVOQyxVQUZNLENBRU8sQ0FGUCxDQUVPLEtBQ2JDLE1BRGEsQ0FDSixHQUhILENBR0csS0FNVEMsWUFOUyxDQU1NQyxJQUFBQSxDQUFLQyxTQUFMRCxDQUFlaEIsQ0FBZmdCLENBVFQsQ0FTd0JoQixLQUM5QmtCLGtCQUQ4QmxCLEVBVHhCLENBVU5rQixNQUNFaEIsTUFBS2EsWUFYRCxDQVdDQSxDQVhoQkgsQ0FBQUEsQ0FXZ0JHLENBS25CLENBQUxwQixDQUFBQSxDQUdKd0IsQyx5QkFBQUEsQ0FBQUEsQ0FBQUEsT0FBQUEsQ0FBSyxvQ0FBTEEsQ0FBMkNDLENBQUFBLEVBQUFBLGtEQUN2Q0EsQ0FBQUEsQ0FBRUMsTUFBRkQsQ0FBUyxVQUFBLGtEQUVMRSxTQUFBQSxDQURVLGVBQ1ZBLENBQWUsRUFBZkEsQ0FBbUIsRUFBbkJBLENBQXVCLEVBQXZCQSxDQUFBQSxDQUF1QixDQUYzQkYsRUFFMkIsQ0FIL0JELEVBZUFBLENBQUFBLENBQUFBLE9BQUFBLENBQUtJLE1BQUxKLENBQVksK0JBQVpBLENBQTZDSyxLQUFBQSxDQUFBQSxDQUFBQSxFQUFBQSwwQkFBQUEsR0FJckNDLENBQUFBLENBQUFBLDJCQUFjQyxJQUFkRCxDQUpxQ0QsQ0FLckNsQixDQUFBQSwyQkFBU3FCLFdBQVRyQixDQUxxQ2tCLENBT3JDeEIsQ0FBQUEsMkJBQU8sQ0FBQSxDQUNONEIsTUFETSxFQUNHLElBREgsQ0FBUDVCLENBUHFDd0IsQ0FBQUEseUJBVXpDekIsQ0FBQUEsQ0FBUUMsQ0FBUkQsQ0FBQUEsQ0FBUUMsR0FFSjZCLENBQUFBLENBQUFBLDJCQUFjLElBQWRBLENBRkk3QixDQVZpQ3dCLHlCQWlCekM3QixDQUFBQSxDQUFLLFlBQUxBLENBQUssU0FKT21DLENBSVAsQ0FKT0EsbURBQ1JELENBQUFBLENBQVNDLENBQVRELENBQVNDLENBR2JuQyxDQUFBQSxDQUhhbUMsS0FLUFIsQ0FBQUEsU0FBQUEsQ0FBVUcsQ0FBVkgsQ0FBdUJoQixDQUF2QmdCLENBQStCLEVBQS9CQSxDQUFtQ3RCLENBQW5Dc0IsQ0FGTjNCLENBY0F5QixDQUFBQSxDQUFFVyxTQUFGWCxDQUFZUyxDQUFaVCxDQUFvQixDQUFBLENBQ2ZRLE1BRGUsRUFDTixJQURNLENBQ04sQ0FDVEksb0JBRFMsRUFDVEEsSUFBdUJDLEVBRlIsQ0FFUUEsQ0FDdkJDLGdCQUR1QkQsRUFDdkJDLENBQW1CLENBSEosQ0FBcEJkLENBZEF6QixDQW9CQXlCLENBQUFBLENBQUVlLElBQUZmLEVBcEJBekIsQ0FvQkV3QyxDQXJDTmhCLENBZkFBLENBdURBQSxDQUFBQSxDQUFBQSxPQUFBQSxDQUFLSSxNQUFMSixDQUFZLGlDQUFaQSxDQUErQ0ssS0FBQUEsQ0FBQUEsQ0FBQUEsRUFBQUEsMEJBQUFBLEdBS3ZDQyxDQUFBQSxDQUFBQSwyQkFBY0MsSUFBZEQsQ0FMdUNELENBTXZDbEIsQ0FBQUEsMkJBQVM4QixhQUFUOUIsQ0FOdUNrQixDQVF2Q3hCLENBQUFBLDJCQUFPLENBQUEsQ0FDTjRCLE1BRE0sRUFKRSxJQUlGLENBQVA1QixDQVJ1Q3dCLENBQUFBLHlCQVczQ3pCLENBQUFBLENBQVFDLENBQVJELENBQUFBLENBQVFDLEdBRUo2QixDQUFBQSxDQUFBQSwyQkFBYyxJQUFkQSxDQUZJN0IsQ0FYbUN3Qix5QkFlM0M3QixDQUFBQSxDQUFLLFlBQUxBLENBQUssU0FET21DLENBQ1AsQ0FET0EsbURBQVVELENBQUFBLENBQVNDLENBQVRELENBQVNDLENBQy9CbkMsQ0FBQUEsQ0FEK0JtQyxLQUd6QlIsQ0FBQUEsU0FBQUEsQ0FBVUcsQ0FBVkgsQ0FBdUJoQixDQUF2QmdCLENBQStCLEVBQS9CQSxDQUFtQ3RCLENBQW5Dc0IsQ0FGTjNCLENBSUF5QixDQUFBQSxDQUFFVyxTQUFGWCxDQUFZUyxDQUFaVCxDQUFvQixDQUFBLENBQ2ZRLE1BRGUsRUFmUCxJQWVPLENBZlAsQ0FpQlJJLG9CQWpCUSxFQWlCUkEsSUFBdUJDLEVBRlIsQ0FFUUEsQ0FDdkJDLGdCQUR1QkQsRUFDdkJDLENBQW1CLENBSEosQ0FBcEJkLENBSkF6QixDQVVBeUIsQ0FBQUEsQ0FBRWUsSUFBRmYsRUFWQXpCLENBVUV3QyxDQXpCTmhCLENBdkRBQSxDQW1GQUEsQ0FBQUEsQ0FBQUEsT0FBQUEsQ0FBS0ksTUFBTEosQ0FBWSw2QkFBWkEsQ0FBMkNLLEtBQUFBLENBQUFBLENBQUFBLEVBQUFBLDBCQUFBQSxHQUluQ0MsQ0FBQUEsQ0FBQUEsMkJBQWNDLElBQWRELENBSm1DRCxDQUtuQ2xCLENBQUFBLDJCQUFTK0IsU0FBVC9CLENBTG1Da0IsQ0FRbkN4QixDQUFBQSwyQkFBTyxDQUFBLENBQ040QixNQURNLEVBREUsR0FDRixDQURFLENBR1JVLGVBSFEsRUFHVSxVQUZaLENBRVksQ0FDbEJDLGVBRGtCLEVBQ0EsaUJBSFosQ0FHWSxDQUNsQkMsZ0JBRGtCLEVBQ0Msa0JBSmIsQ0FBUHhDLENBUm1Dd0IsQ0FBQUEseUJBY3ZDekIsQ0FBQUEsQ0FBUUMsQ0FBUkQsQ0FBQUEsQ0FBUUMsR0FFSjZCLENBQUFBLENBQUFBLDJCQUFjLElBQWRBLENBRkk3QixDQWQrQndCLHlCQWtCdkM3QixDQUFBQSxDQUFLLFlBQUxBLENBQUssU0FET21DLENBQ1AsQ0FET0EsbURBQVVELENBQUFBLENBQVNDLENBQVRELENBQVNDLENBQy9CbkMsQ0FBQUEsQ0FEK0JtQyxLQUd6QlIsQ0FBQUEsU0FBQUEsQ0FBVUcsQ0FBVkgsQ0FBdUJoQixDQUF2QmdCLENBQStCLEVBQS9CQSxDQUFtQ3RCLENBQW5Dc0IsQ0FGTjNCLENBSUF5QixDQUFBQSxDQUFFVyxTQUFGWCxDQUFZUyxDQUFaVCxDQUFtQixDQUFBLENBQ2RRLE1BRGMsRUFmTixHQWVNLENBZk4sQ0FpQlJJLG9CQWpCUSxFQWlCUkEsSUFBdUJDLEVBRlQsQ0FFU0EsQ0FDdkJDLGdCQUR1QkQsRUFDdkJDLENBQW1CLENBSEwsQ0FBbkJkLENBSkF6QixDQVVBeUIsQ0FBQUEsQ0FBRWUsSUFBRmYsRUFWQXpCLENBVUV3QyxDQTVCTmhCLENBbkZBQSxDQWtIQUEsQ0FBQUEsQ0FBQUEsT0FBQUEsQ0FBS0ksTUFBTEosQ0FBWSw4QkFBWkEsQ0FBNENLLEtBQUFBLENBQUFBLENBQUFBLEVBQUFBLDBCQUFBQSxHQUlwQ0MsQ0FBQUEsQ0FBQUEsMkJBQWNDLElBQWRELENBSm9DRCxDQUtwQ2xCLENBQUFBLDJCQUFTbUMsVUFBVG5DLENBTG9Da0IsQ0FRcEN4QixDQUFBQSwyQkFBTyxDQUFBLENBQ040QixNQURNLEVBREUsR0FDRixDQURFLENBR1JjLCtCQUhRLEVBR1JBLENBQWtDLENBRjVCLENBRTRCLENBQ2xDQyx5QkFEa0MsRUFDbENBLENBQTRCLENBSHRCLENBR3NCLENBQzVCQyx3QkFENEIsRUFDNUJBLENBQTJCLENBSnJCLENBSXFCLENBQzNCQyxpQ0FEMkIsRUFDM0JBLENBQW9DLENBTDlCLENBSzhCLENBQ3BDQyx1Q0FEb0MsRUFDcENBLENBQTBDLENBTnBDLENBTW9DLENBQzFDQywrQkFEMEMsRUFDMUNBLENBQWtDLENBUDVCLENBTzRCLENBQ2xDQyx5QkFEa0MsRUFDbENBLENBQTRCLENBUnRCLENBUXNCLENBQzVCQyw0QkFENEIsRUFDNUJBLENBQStCLENBVHpCLENBU3lCLENBQy9CQyw4QkFEK0IsRUFDL0JBLENBQWlDLENBVjNCLENBVTJCLENBQ2pDQyx3QkFEaUMsRUFDakNBLENBQTJCLENBWHJCLENBV3FCLENBQzNCQywyQkFEMkIsRUFDM0JBLENBQThCLENBWnhCLENBWXdCLENBQzlCQyxnQkFEOEIsRUFDOUJBLENBQW1CLENBYmIsQ0FhYSxDQUNuQkMsMkJBRG1CLEVBQ25CQSxDQUE4QixDQWR4QixDQWN3QixDQUM5QkMsc0JBRDhCLEVBQzlCQSxDQUF5QixDQWZuQixDQUFQdkQsQ0FSb0N3QixDQUFBQSx5QkF5QnhDekIsQ0FBQUEsQ0FBUUMsQ0FBUkQsQ0FBQUEsQ0FBUUMsR0FFSjZCLENBQUFBLENBQUFBLDJCQUFjLElBQWRBLENBRkk3QixDQXpCZ0N3Qix5QkE2QnhDN0IsQ0FBQUEsQ0FBSyxZQUFMQSxDQUFLLFNBRE9tQyxDQUNQLENBRE9BLG1EQUFVRCxDQUFBQSxDQUFTQyxDQUFURCxDQUFTQyxDQUMvQm5DLENBQUFBLENBRCtCbUMsS0FHekJSLENBQUFBLFNBQUFBLENBQVVHLENBQVZILENBQXVCaEIsQ0FBdkJnQixDQUErQixFQUEvQkEsQ0FBbUN0QixDQUFuQ3NCLENBRk4zQixDQUlBeUIsQ0FBQUEsQ0FBRVcsU0FBRlgsQ0FBWVMsQ0FBWlQsQ0FBbUIsQ0FBQSxDQUNkYyxnQkFEYyxFQUNkQSxDQUFtQixDQURMLENBQW5CZCxDQUpBekIsQ0FRQXlCLENBQUFBLENBQUVlLElBQUZmLEVBUkF6QixDQVFFd0MsQ0FyQ05oQixDQWxIQUEsQ0EwSkFBLENBQUFBLENBQUFBLE9BQUFBLENBQUtJLE1BQUxKLENBQVksaUNBQVpBLENBQStDSyxLQUFBQSxDQUFBQSxDQUFBQSxFQUFBQSwwQkFBQUEsR0FJdkNDLENBQUFBLENBQUFBLDJCQUFjK0IsT0FBZC9CLENBSnVDRCxDQUt2Q2xCLENBQUFBLDJCQUFTbUQsYUFBVG5ELENBTHVDa0IsQ0FTdkN4QixDQUFBQSwyQkFBTyxDQUFBLENBQ04wRCxTQURNLEVBRkssR0FFTCxDQUZLLENBSVhDLGFBSlcsRUFDSCxHQUNGLENBREUsQ0FJUkMsa0JBSlEsRUFJYSxVQUhmLENBR2UsQ0FDckJDLGtCQURxQixFQUNBLGlCQUpmLENBQVA3RCxDQVR1Q3dCLENBQUFBLHlCQWUzQ3pCLENBQUFBLENBQVFDLENBQVJELENBQUFBLENBQVFDLEdBRUo2QixDQUFBQSxDQUFBQSwyQkFBYyxJQUFkQSxDQUZJN0IsQ0FmbUN3Qix5QkFtQjNDN0IsQ0FBQUEsQ0FBSyxZQUFMQSxDQUFLLFNBRE9tQyxDQUNQLENBRE9BLG1EQUFVRCxDQUFBQSxDQUFTQyxDQUFURCxDQUFTQyxDQUMvQm5DLENBQUFBLENBRCtCbUMsS0FHekJSLENBQUFBLFNBQUFBLENBQVVHLENBQVZILENBQXVCaEIsQ0FBdkJnQixDQUErQixFQUEvQkEsQ0FBbUN0QixDQUFuQ3NCLENBRk4zQixDQUlBeUIsQ0FBQUEsQ0FBRVcsU0FBRlgsQ0FBWVMsQ0FBWlQsQ0FBbUIsQ0FBQSxDQUNkMEMsbUJBRGMsRUFDZEEsQ0FBc0IsQ0FEUixDQUFuQjFDLENBSkF6QixDQVFBeUIsQ0FBQUEsQ0FBRWUsSUFBRmYsRUFSQXpCLENBUUV3QyxDQTNCTmhCLENBMUpBQSxDQXdMQUEsQ0FBQUEsQ0FBQUEsT0FBQUEsQ0FBS0ksTUFBTEosQ0FBWSxpQ0FBWkEsQ0FBK0NLLEtBQUFBLENBQUFBLENBQUFBLEVBQUFBLDBCQUFBQSxHQUl2Q0MsQ0FBQUEsQ0FBQUEsMkJBQWMrQixPQUFkL0IsQ0FKdUNELENBS3ZDbEIsQ0FBQUEsMkJBQVN5RCxhQUFUekQsQ0FMdUNrQixDQVN2Q3hCLENBQUFBLDJCQUFPLENBQUEsQ0FDTjBELFNBRE0sRUFGSyxHQUVMLENBRkssQ0FJWEMsYUFKVyxFQUNILEdBQ0YsQ0FBUDNELENBVHVDd0IsQ0FBQUEseUJBYTNDekIsQ0FBQUEsQ0FBUUMsQ0FBUkQsQ0FBQUEsQ0FBUUMsR0FFSjZCLENBQUFBLENBQUFBLDJCQUFjLElBQWRBLENBRkk3QixDQWJtQ3dCLHlCQWlCM0M3QixDQUFBQSxDQUFLLFlBQUxBLENBQUssU0FET21DLENBQ1AsQ0FET0EsbURBQVVELENBQUFBLENBQVNDLENBQVRELENBQVNDLENBQy9CbkMsQ0FBQUEsQ0FEK0JtQyxLQUd6QlIsQ0FBQUEsU0FBQUEsQ0FBVUcsQ0FBVkgsQ0FBdUJoQixDQUF2QmdCLENBQStCLEVBQS9CQSxDQUFtQ3RCLENBQW5Dc0IsQ0FGTjNCLENBSUF5QixDQUFBQSxDQUFFVyxTQUFGWCxDQUFZUyxDQUFaVCxDQUFtQixDQUFBLENBQ2QwQyxtQkFEYyxFQUNkQSxDQUFzQixDQURSLENBQW5CMUMsQ0FKQXpCLENBUUF5QixDQUFBQSxDQUFFZSxJQUFGZixFQVJBekIsQ0FRRXdDLENBekJOaEIsQ0F4TEFBLENBb05BQSxDQUFBQSxDQUFBQSxPQUFBQSxDQUFLSSxNQUFMSixDQUFZLDhDQUFaQSxDQUE0REssS0FBQUEsQ0FBQUEsQ0FBQUEsRUFBQUEsMEJBQUFBLEdBSXBEQyxDQUFBQSxDQUFBQSwyQkFBYytCLE9BQWQvQixDQUpvREQsQ0FLcERsQixDQUFBQSwyQkFBUzBELGtCQUFUMUQsQ0FMb0RrQixDQVNwRHhCLENBQUFBLDJCQUFPLENBQUEsQ0FDTjBELFNBRE0sRUFGSyxHQUVMLENBRkssQ0FJWEMsYUFKVyxFQUNILEdBQ0YsQ0FERSxDQUlSTSxxQkFKUSxFQUlnQixTQUhsQixDQUdrQixDQUN4QkMsa0JBRHdCLEVBQ0gsTUFKZixDQUllLENBQ3JCQyx5QkFEcUIsRUFDckJBLENBQTRCLENBTHRCLENBQVBuRSxDQVRvRHdCLENBQUFBLHlCQWdCeER6QixDQUFBQSxDQUFRQyxDQUFSRCxDQUFBQSxDQUFRQyxHQUVKNkIsQ0FBQUEsQ0FBQUEsMkJBQWMsSUFBZEEsQ0FGSTdCLENBaEJnRHdCLHlCQW9CeEQ3QixDQUFBQSxDQUFLLFlBQUxBLENBQUssU0FET21DLENBQ1AsQ0FET0EsbURBQVVELENBQUFBLENBQVNDLENBQVRELENBQVNDLENBQy9CbkMsQ0FBQUEsQ0FEK0JtQyxLQUd6QlIsQ0FBQUEsU0FBQUEsQ0FBVUcsQ0FBVkgsQ0FBdUJoQixDQUF2QmdCLENBQStCLEVBQS9CQSxDQUFtQ3RCLENBQW5Dc0IsQ0FGTjNCLENBSUF5QixDQUFBQSxDQUFFVyxTQUFGWCxDQUFZUyxDQUFaVCxDQUFtQixDQUFBLENBQ2QwQyxtQkFEYyxFQUNkQSxDQUFzQixDQURSLENBQW5CMUMsQ0FKQXpCLENBUUF5QixDQUFBQSxDQUFFZSxJQUFGZixFQVJBekIsQ0FRRXdDLENBNUJOaEIsQ0FwTkFBLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdGVzdCBmcm9tICdhdmEnO1xyXG5pbXBvcnQgJ0BrMm9zcy9rMi1icm9rZXItY29yZS90ZXN0LWZyYW1ld29yayc7XHJcbmltcG9ydCAnLi9pbmRleCc7XHJcblxyXG5cclxuLy9cclxuLy8gV0FSTklORzogYW55IHRlc3RzIHRoYXQgdXNlIHRoaXMgbW9jaygpIG11c3QgYmUgcnVuIHNlcmlhbGx5XHJcbi8vICh1c2luZyB0ZXN0LnNlcmlhbCgpKSwgYmVjYXVzZSB0aGV5IG1vZGlmeSBnbG9iYWwgICFcclxuZnVuY3Rpb24gbW9jayhuYW1lOiBzdHJpbmcsIHZhbHVlOiBhbnkpIFxyXG57XHJcbiAgICBnbG9iYWxbbmFtZV0gPSB2YWx1ZTtcclxufVxyXG5cclxuLy8gaGVscGVyIG1ldGhvZCB0byBwYXNzIHRoZSBkYXRhIHdoaWNoIGlzIGR5bmFtaWMgdG8gZWFjaCB0ZXN0IGludG8gdGhlIG1vY2tlZCBYSFIgY2xhc3Mgb2JqZWN0LlxyXG4vLyB1c2VzIG1vY2soKSBzbyBtdXN0IG9ubHkgYmUgdXNlZCBpbiB0ZXN0LnNlcmlhbCgpJ3kgcnVuIHRlc3RzXHJcbmZ1bmN0aW9uIG1vY2tYSFIoZGF0YSl7XHJcbiAgICBsZXQgeGhyOiB7W2tleTpzdHJpbmddOiBhbnl9ID0gbnVsbDtcclxuICAgIGNsYXNzIFhIUiB7XHJcbiAgICAgICAgcHVibGljIG9ucmVhZHlzdGF0ZWNoYW5nZTogKCkgPT4gdm9pZDtcclxuICAgICAgICBwdWJsaWMgcmVhZHlTdGF0ZTogbnVtYmVyO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0dXM6IG51bWJlcjtcclxuICAgICAgICBwdWJsaWMgcmVzcG9uc2VUZXh0OiBzdHJpbmc7XHJcbiAgICAgICAgcHJpdmF0ZSByZWNvcmRlcjoge1trZXk6c3RyaW5nXTogYW55fTtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgICAgIHhociA9IHRoaXMucmVjb3JkZXIgPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5yZWNvcmRlci5oZWFkZXJzID0ge307XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvcGVuKG1ldGhvZDogc3RyaW5nLCB1cmw6IHN0cmluZykge1xyXG4gICAgICAgICAgICB0aGlzLnJlY29yZGVyLm9wZW5lZCA9IHttZXRob2QsIHVybH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZXRSZXF1ZXN0SGVhZGVyKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVjb3JkZXIuaGVhZGVyc1trZXldID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZW5kKCkge1xyXG4gICAgICAgICAgICBxdWV1ZU1pY3JvdGFzaygoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlYWR5U3RhdGUgPSA0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSAyMDA7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnJlc3BvbnNlVGV4dCA9IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIC8vICAgICBcImlkXCI6IDQzMjEsXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgXCJyZXF1ZXN0U3RhdHVzVXJsXCI6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIC8vICAgICBcImlzU3VjY2Vzc2Z1bFwiOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzcG9uc2VUZXh0ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9ucmVhZHlzdGF0ZWNoYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucmVzcG9uc2VUZXh0O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbW9jaygnWE1MSHR0cFJlcXVlc3QnLCBYSFIpO1xyXG59XHJcblxyXG50ZXN0KCdvbmV4ZWN1dGUgZmFpbHMgZm9yIGludmFsaWQgb2JqZWN0JywgdCA9PiB7XHJcbiAgICB0LnRocm93cyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGV0IG9iaiA9ICdpbnZhbGlkT2JqZWN0JztcclxuICAgICAgICBvbmV4ZWN1dGUob2JqLCAnJywge30sIHt9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8vXHJcbi8vIC8vIGV4YW1wbGUgb2YgaG93IHRvIGNhdGNoIGEgdGhyb3cgZXhjZXB0aW9uXHJcbi8vIGNvbnN0IHByb21pc2UgPSAoKSA9PiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1RFU1QnKSk7XHJcbi8vIHRlc3QoJ3JlamVjdHMnLCBhc3luYyB0ID0+IHtcclxuLy8gICAgIGNvbnN0IGVycm9yID0gYXdhaXQgdC50aHJvd3NBc3luYyhwcm9taXNlKTtcclxuLy8gICAgIHQuaXMoZXJyb3IubWVzc2FnZSwgJ1RFU1QnKTtcclxuLy8gfSk7XHJcblxyXG50ZXN0LnNlcmlhbCgnb25leGVjdXRlVGVhbUFyY2hpdmUgc3VjY2VlZHMnLCBhc3luYyB0ID0+IHtcclxuICAgIC8vXHJcbiAgICAvLyBub3RlOiBpbnB1dHMvb3V0cHV0cyBmb3VuZCBpbmRleC50cyBvbmRlc2NyaWJlIFwicG9zdFNjaGVtYSgpXCIgbWV0aG9kXHJcblxyXG4gICAgbGV0IHZhbGlkT2JqZWN0ID0gVGVhbTtcclxuICAgIGxldCBtZXRob2QgPSBUZWFtQXJjaGl2ZTtcclxuXHJcbiAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICBbVGVhbUlkXTogMTIzNFxyXG4gICAgfTtcclxuICAgIG1vY2tYSFIoZGF0YSk7XHJcblxyXG4gICAgbGV0IHJlc3VsdDogYW55ID0gbnVsbDtcclxuICAgIGZ1bmN0aW9uIHByKHI6IGFueSkge1xyXG4gICAgICAgIHJlc3VsdCA9IHI7XHJcbiAgICB9XHJcblxyXG4gICAgbW9jaygncG9zdFJlc3VsdCcsIHByKTtcclxuXHJcbiAgICBhd2FpdCBvbmV4ZWN1dGUodmFsaWRPYmplY3QsIG1ldGhvZCwge30sIGRhdGEpO1xyXG5cclxuICAgIC8vIHQuZGVlcEVxdWFsKHhociwge1xyXG4gICAgLy8gICAgIG9wZW5lZDoge1xyXG4gICAgLy8gICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgLy8gICAgICAgICB1cmw6ICdodHRwczovL2pzb25wbGFjZWhvbGRlci50eXBpY29kZS5jb20vdG9kb3MvMTIzJ1xyXG4gICAgLy8gICAgIH0sXHJcbiAgICAvLyAgICAgaGVhZGVyczoge1xyXG4gICAgLy8gICAgICAgICAndGVzdCc6ICd0ZXN0IHZhbHVlJ1xyXG4gICAgLy8gICAgIH1cclxuICAgIC8vIH0pO1xyXG5cclxuICAgIHQuZGVlcEVxdWFsKHJlc3VsdCwge1xyXG4gICAgICAgIFtUZWFtSWRdOiAxMjM0LFxyXG4gICAgICAgIFtUZWFtUmVxdWVzdFN0YXR1c1VybF06IHVuZGVmaW5lZCxcclxuICAgICAgICBbVGVhbUlzU3VjY2Vzc2Z1bF06IHRydWVcclxuICAgIH0pO1xyXG5cclxuICAgIHQucGFzcygpO1xyXG59KTtcclxuXHJcbnRlc3Quc2VyaWFsKCdvbmV4ZWN1dGVUZWFtVW5hcmNoaXZlIHN1Y2NlZWRzJywgYXN5bmMgdCA9PiB7XHJcbiAgICAvL1xyXG4gICAgLy8gbm90ZTogaW5wdXRzL291dHB1dHMgZm91bmQgaW5kZXgudHMgb25kZXNjcmliZSBcInBvc3RTY2hlbWEoKVwiIG1ldGhvZFxyXG5cclxuICAgIGxldCB0ZWFtSWQgPSA0MzIxO1xyXG4gICAgbGV0IHZhbGlkT2JqZWN0ID0gVGVhbTtcclxuICAgIGxldCBtZXRob2QgPSBUZWFtVW5hcmNoaXZlO1xyXG5cclxuICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgIFtUZWFtSWRdOiB0ZWFtSWRcclxuICAgIH07XHJcbiAgICBtb2NrWEhSKGRhdGEpO1xyXG5cclxuICAgIGxldCByZXN1bHQ6IGFueSA9IG51bGw7XHJcbiAgICBmdW5jdGlvbiBwcihyOiBhbnkpIHsgcmVzdWx0ID0gcjsgIH1cclxuICAgIG1vY2soJ3Bvc3RSZXN1bHQnLCBwcik7XHJcblxyXG4gICAgYXdhaXQgb25leGVjdXRlKHZhbGlkT2JqZWN0LCBtZXRob2QsIHt9LCBkYXRhKTtcclxuXHJcbiAgICB0LmRlZXBFcXVhbChyZXN1bHQsIHtcclxuICAgICAgICBbVGVhbUlkXTogdGVhbUlkLFxyXG4gICAgICAgIFtUZWFtUmVxdWVzdFN0YXR1c1VybF06IHVuZGVmaW5lZCxcclxuICAgICAgICBbVGVhbUlzU3VjY2Vzc2Z1bF06IHRydWVcclxuICAgIH0pO1xyXG5cclxuICAgIHQucGFzcygpO1xyXG59KTtcclxuXHJcbnRlc3Quc2VyaWFsKCdvbmV4ZWN1dGVUZWFtQ2xvbmUgc3VjY2VlZHMnLCBhc3luYyB0ID0+IHtcclxuICAgIC8vXHJcbiAgICAvLyBub3RlOiBpbnB1dHMvb3V0cHV0cyBmb3VuZCBpbmRleC50cyBvbmRlc2NyaWJlIFwicG9zdFNjaGVtYSgpXCIgbWV0aG9kXHJcblxyXG4gICAgbGV0IHZhbGlkT2JqZWN0ID0gVGVhbTtcclxuICAgIGxldCBtZXRob2QgPSBUZWFtQ2xvbmU7XHJcblxyXG4gICAgbGV0IHRlYW1JZCA9IDk5OTtcclxuICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgIFtUZWFtSWRdOiB0ZWFtSWQsXHJcbiAgICAgICAgW1RlYW1EaXNwbGF5TmFtZV06IFwiU29tZU5hbWVcIixcclxuICAgICAgICBbVGVhbURlc2NyaXB0aW9uXTogXCJTb21lRGVzY3JpcHRpb25cIixcclxuICAgICAgICBbVGVhbU1haWxOaWNrbmFtZV06IFwiU29tZU1haWxOaWNrbmFtZVwiXHJcbiAgICB9O1xyXG4gICAgbW9ja1hIUihkYXRhKTtcclxuXHJcbiAgICBsZXQgcmVzdWx0OiBhbnkgPSBudWxsO1xyXG4gICAgZnVuY3Rpb24gcHIocjogYW55KSB7IHJlc3VsdCA9IHI7ICB9XHJcbiAgICBtb2NrKCdwb3N0UmVzdWx0JywgcHIpO1xyXG5cclxuICAgIGF3YWl0IG9uZXhlY3V0ZSh2YWxpZE9iamVjdCwgbWV0aG9kLCB7fSwgZGF0YSk7XHJcblxyXG4gICAgdC5kZWVwRXF1YWwocmVzdWx0LHtcclxuICAgICAgICBbVGVhbUlkXTogdGVhbUlkLFxyXG4gICAgICAgIFtUZWFtUmVxdWVzdFN0YXR1c1VybF06IHVuZGVmaW5lZCxcclxuICAgICAgICBbVGVhbUlzU3VjY2Vzc2Z1bF06IHRydWVcclxuICAgIH0pO1xyXG5cclxuICAgIHQucGFzcygpO1xyXG59KTtcclxuXHJcbnRlc3Quc2VyaWFsKCdvbmV4ZWN1dGVUZWFtVXBkYXRlIHN1Y2NlZWRzJywgYXN5bmMgdCA9PiB7XHJcbiAgICAvL1xyXG4gICAgLy8gbm90ZTogaW5wdXRzL291dHB1dHMgZm91bmQgaW5kZXgudHMgb25kZXNjcmliZSBcInBvc3RTY2hlbWEoKVwiIG1ldGhvZFxyXG5cclxuICAgIGxldCB2YWxpZE9iamVjdCA9IFRlYW07XHJcbiAgICBsZXQgbWV0aG9kID0gVGVhbVVwZGF0ZTtcclxuXHJcbiAgICBsZXQgdGVhbUlkID0gNTU1O1xyXG4gICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgW1RlYW1JZF06IHRlYW1JZCxcclxuICAgICAgICBbVGVhbU1zQWxsb3dDcmVhdGVVcGRhdGVDaGFubmVsc106IHRydWUsXHJcbiAgICAgICAgW1RlYW1Nc0FsbG93RGVsZXRlQ2hhbm5lbHNdOiB0cnVlLFxyXG4gICAgICAgIFtUZWFtTXNBbGxvd0FkZFJlbW92ZUFwcHNdOiB0cnVlLFxyXG4gICAgICAgIFtUZWFtTXNBbGxvd0NyZWF0ZVVwZGF0ZVJlbW92ZVRhYnNdOiB0cnVlLFxyXG4gICAgICAgIFtUZWFtTXNBbGxvd0NyZWF0ZVVwZGF0ZVJlbW92ZUNvbm5lY3RvcnNdOiB0cnVlLFxyXG4gICAgICAgIFtUZWFtR3NBbGxvd0NyZWF0ZVVwZGF0ZUNoYW5uZWxzXTogdHJ1ZSxcclxuICAgICAgICBbVGVhbUdzQWxsb3dEZWxldGVDaGFubmVsc106IHRydWUsXHJcbiAgICAgICAgW1RlYW1Nc2dBbGxvd1VzZXJFZGl0TWVzc2FnZXNdOiB0cnVlLFxyXG4gICAgICAgIFtUZWFtTXNnQWxsb3dVc2VyRGVsZXRlTWVzc2FnZXNdOiB0cnVlLFxyXG4gICAgICAgIFtUZWFtTXNnQWxsb3dUZWFtTWVudGlvbnNdOiB0cnVlLFxyXG4gICAgICAgIFtUZWFtTXNnQWxsb3dDaGFubmVsTWVudGlvbnNdOiB0cnVlLFxyXG4gICAgICAgIFtUZWFtRnNBbGxvd0dpcGh5XTogdHJ1ZSxcclxuICAgICAgICBbVGVhbUZzQWxsb3dTdGlja2Vyc0FuZE1lbWVzXTogdHJ1ZSxcclxuICAgICAgICBbVGVhbUZzQWxsb3dDdXN0b21NZW1lc106IHRydWVcclxuICAgIH07XHJcbiAgICBtb2NrWEhSKGRhdGEpO1xyXG5cclxuICAgIGxldCByZXN1bHQ6IGFueSA9IG51bGw7XHJcbiAgICBmdW5jdGlvbiBwcihyOiBhbnkpIHsgcmVzdWx0ID0gcjsgIH1cclxuICAgIG1vY2soJ3Bvc3RSZXN1bHQnLCBwcik7XHJcblxyXG4gICAgYXdhaXQgb25leGVjdXRlKHZhbGlkT2JqZWN0LCBtZXRob2QsIHt9LCBkYXRhKTtcclxuXHJcbiAgICB0LmRlZXBFcXVhbChyZXN1bHQse1xyXG4gICAgICAgIFtUZWFtSXNTdWNjZXNzZnVsXTogdHJ1ZVxyXG4gICAgfSk7XHJcblxyXG4gICAgdC5wYXNzKCk7XHJcbn0pO1xyXG5cclxudGVzdC5zZXJpYWwoJ29uZXhlY3V0ZUNoYW5uZWxVcGRhdGUgc3VjY2VlZHMnLCBhc3luYyB0ID0+IHtcclxuICAgIC8vXHJcbiAgICAvLyBub3RlOiBpbnB1dHMvb3V0cHV0cyBmb3VuZCBpbmRleC50cyBvbmRlc2NyaWJlIFwicG9zdFNjaGVtYSgpXCIgbWV0aG9kXHJcblxyXG4gICAgbGV0IHZhbGlkT2JqZWN0ID0gQ2hhbm5lbDtcclxuICAgIGxldCBtZXRob2QgPSBDaGFubmVsVXBkYXRlO1xyXG5cclxuICAgIGxldCBjaGFubmVsSWQgPSA3Nzc7XHJcbiAgICBsZXQgdGVhbUlkID0gODg4O1xyXG4gICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgW0NoYW5uZWxJZF06IGNoYW5uZWxJZCxcclxuICAgICAgICBbQ2hhbm5lbFRlYW1JZF06IHRlYW1JZCxcclxuICAgICAgICBbQ2hhbm5lbERpc3BsYXlOYW1lXTogXCJTb21lTmFtZVwiLFxyXG4gICAgICAgIFtDaGFubmVsRGVzY3JpcHRpb25dOiBcIlNvbWVEZXNjcmlwdGlvblwiXHJcbiAgICB9O1xyXG4gICAgbW9ja1hIUihkYXRhKTtcclxuXHJcbiAgICBsZXQgcmVzdWx0OiBhbnkgPSBudWxsO1xyXG4gICAgZnVuY3Rpb24gcHIocjogYW55KSB7IHJlc3VsdCA9IHI7ICB9XHJcbiAgICBtb2NrKCdwb3N0UmVzdWx0JywgcHIpO1xyXG5cclxuICAgIGF3YWl0IG9uZXhlY3V0ZSh2YWxpZE9iamVjdCwgbWV0aG9kLCB7fSwgZGF0YSk7XHJcblxyXG4gICAgdC5kZWVwRXF1YWwocmVzdWx0LHtcclxuICAgICAgICBbQ2hhbm5lbElzU3VjY2Vzc2Z1bF06IHRydWVcclxuICAgIH0pO1xyXG5cclxuICAgIHQucGFzcygpO1xyXG59KTtcclxuXHJcbnRlc3Quc2VyaWFsKCdvbmV4ZWN1dGVDaGFubmVsRGVsZXRlIHN1Y2NlZWRzJywgYXN5bmMgdCA9PiB7XHJcbiAgICAvL1xyXG4gICAgLy8gbm90ZTogaW5wdXRzL291dHB1dHMgZm91bmQgaW5kZXgudHMgb25kZXNjcmliZSBcInBvc3RTY2hlbWEoKVwiIG1ldGhvZFxyXG5cclxuICAgIGxldCB2YWxpZE9iamVjdCA9IENoYW5uZWw7XHJcbiAgICBsZXQgbWV0aG9kID0gQ2hhbm5lbERlbGV0ZTtcclxuXHJcbiAgICBsZXQgY2hhbm5lbElkID0gMzQ1O1xyXG4gICAgbGV0IHRlYW1JZCA9IDEwMDtcclxuICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgIFtDaGFubmVsSWRdOiBjaGFubmVsSWQsXHJcbiAgICAgICAgW0NoYW5uZWxUZWFtSWRdOiB0ZWFtSWRcclxuICAgIH07XHJcbiAgICBtb2NrWEhSKGRhdGEpO1xyXG5cclxuICAgIGxldCByZXN1bHQ6IGFueSA9IG51bGw7XHJcbiAgICBmdW5jdGlvbiBwcihyOiBhbnkpIHsgcmVzdWx0ID0gcjsgIH1cclxuICAgIG1vY2soJ3Bvc3RSZXN1bHQnLCBwcik7XHJcblxyXG4gICAgYXdhaXQgb25leGVjdXRlKHZhbGlkT2JqZWN0LCBtZXRob2QsIHt9LCBkYXRhKTtcclxuXHJcbiAgICB0LmRlZXBFcXVhbChyZXN1bHQse1xyXG4gICAgICAgIFtDaGFubmVsSXNTdWNjZXNzZnVsXTogdHJ1ZVxyXG4gICAgfSk7XHJcblxyXG4gICAgdC5wYXNzKCk7XHJcbn0pO1xyXG5cclxudGVzdC5zZXJpYWwoJ29uZXhlY3V0ZVNlbmRNZXNzYWdlIChvZiBhIENoYW5uZWwpIHN1Y2NlZWRzJywgYXN5bmMgdCA9PiB7XHJcbiAgICAvL1xyXG4gICAgLy8gbm90ZTogaW5wdXRzL291dHB1dHMgZm91bmQgaW5kZXgudHMgb25kZXNjcmliZSBcInBvc3RTY2hlbWEoKVwiIG1ldGhvZFxyXG5cclxuICAgIGxldCB2YWxpZE9iamVjdCA9IENoYW5uZWw7XHJcbiAgICBsZXQgbWV0aG9kID0gQ2hhbm5lbFNlbmRNZXNzYWdlO1xyXG5cclxuICAgIGxldCBjaGFubmVsSWQgPSAzNDU7XHJcbiAgICBsZXQgdGVhbUlkID0gMTAwO1xyXG4gICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgW0NoYW5uZWxJZF06IGNoYW5uZWxJZCxcclxuICAgICAgICBbQ2hhbm5lbFRlYW1JZF06IHRlYW1JZCxcclxuICAgICAgICBbQ2hhbm5lbE1lc3NhZ2VTdWJqZWN0XTogXCJzdWJqZWN0XCIsXHJcbiAgICAgICAgW0NoYW5uZWxNZXNzYWdlQm9keV06IFwiYm9keVwiLFxyXG4gICAgICAgIFtDaGFubmVsTWVzc2FnZUlzSW1wb3J0YW50XTogdHJ1ZVxyXG4gICAgfTtcclxuICAgIG1vY2tYSFIoZGF0YSk7XHJcblxyXG4gICAgbGV0IHJlc3VsdDogYW55ID0gbnVsbDtcclxuICAgIGZ1bmN0aW9uIHByKHI6IGFueSkgeyByZXN1bHQgPSByOyAgfVxyXG4gICAgbW9jaygncG9zdFJlc3VsdCcsIHByKTtcclxuXHJcbiAgICBhd2FpdCBvbmV4ZWN1dGUodmFsaWRPYmplY3QsIG1ldGhvZCwge30sIGRhdGEpO1xyXG5cclxuICAgIHQuZGVlcEVxdWFsKHJlc3VsdCx7XHJcbiAgICAgICAgW0NoYW5uZWxJc1N1Y2Nlc3NmdWxdOiB0cnVlXHJcbiAgICB9KTtcclxuXHJcbiAgICB0LnBhc3MoKTtcclxufSk7Il19